--自增列相关的系统表结构
CREATE TABLE SYS_OBJECT_IDENTITY(
       TABLE_NAME VARCHAR(50),
       IDENTITY_SEED INTEGER,
       IDENTITY_INCREMENT INTEGER,
       CURRENT_VALUE INTEGER  
);


--获取表对象的自增列值。
--create chendc 2010-01-07
--目的： 方便直接在sql 中调用

create or replace function FU_GET_NEXT_IDENTITY(pTABLE_NAME VARCHAR2,pCOUNT INT) return integer 
  is
  
  PRAGMA AUTONOMOUS_TRANSACTION;
  Result integer;
begin

  UPDATE SYS_OBJECT_IDENTITY SET CURRENT_VALUE=CURRENT_VALUE + pCOUNT 
        WHERE TABLE_NAME=pTABLE_NAME;
 IF SQL%NOTFOUND THEN
   BEGIN   
        INSERT INTO SYS_OBJECT_IDENTITY(TABLE_NAME,CURRENT_VALUE) 
        VALUES(pTABLE_NAME,pCOUNT)  ;
        SELECT 1 INTO RESULT FROM DUAL;
   END;
 ELSE
   BEGIN
      SELECT CURRENT_VALUE - pCOUNT + 1 INTO Result
      FROM SYS_OBJECT_IDENTITY WHERE TABLE_NAME=pTABLE_NAME;
   END;
 END IF;   
 COMMIT;
 return(Result);
end FU_GET_NEXT_IDENTITY;
 
 
--模块评论表结构
create table BF_MODULE_COMMENT
(
  ID                   INTEGER not null,
  APPLICATION_IDENTITY VARCHAR2(30),
  MODULE_IDENTITY      VARCHAR2(30),
  COMMENT_TYPE      VARCHAR2(30),
  COMMENT_CONTENT      BLOB,
  USER_ID              VARCHAR2(30),
  CREATE_DATE          TIMESTAMP(6),
  LAST_MODIFIED_DATE   TIMESTAMP(6)
)